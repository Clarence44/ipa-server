(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){},33:function(e,t,n){e.exports=n(70)},38:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),c=n.n(o),i=(n(38),n(13)),l=n(4),s=n(7);n(16);function d(){for(var e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],t=0;t<e.length;t++)if(window.navigator.userAgent.indexOf(e[t])>0)return!1;return!0}function u(){return navigator.language||navigator.browserLanguage}document.cookie="locale=".concat(u(),";");var m={fetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise(function(a,r){var o=new XMLHttpRequest;for(var c in o.open(t.method||"get",e),t.headers||{})o.setRequestHeader(c,t.headers[c]);o.onload=function(e){return a(JSON.parse(e.target.responseText))},o.onerror=r,o.upload&&n&&(o.upload.onprogress=n),o.send(t.body)})},isPC:d(),langString:function(e){var t={goBack:{"zh-cn":"\u8fd4\u56de"},Android:{"zh-cn":"\u5b89\u5353"},IOS:{"zh-cn":"\u82f9\u679c"},Upload:{"zh-cn":"\u4e0a\u4f20"},Download:{"zh-cn":"\u4e0b\u8f7d"},"Upload Date: ":{"zh-cn":"\u66f4\u65b0\u65f6\u95f4\uff1a"},Add:{"zh-cn":"\u6dfb\u52a0"},"Upload Done!":{"zh-cn":"\u4e0a\u4f20\u6210\u529f\uff01"},"Download and Install":{"zh-cn":"\u4e0b\u8f7d\u5b89\u88c5"},Beta:{"zh-cn":"\u5185\u6d4b\u7248"},Current:{"zh-cn":"\u5f53\u524d"},Channel:{"zh-cn":"\u6e20\u9053"}}[e][u().toLowerCase()];return t||e},sizeStr:function(e){var t=1048576,n=1024*t;return e>n?"".concat((e/n).toFixed(2)," GB"):e>t?"".concat((e/t).toFixed(2)," MB"):"".concat((e/1024).toFixed(2)," KB")},onClickInstall:function(e){"IOS"===e.platform?window.location.href="itms-services://?action=download-manifest&url="+e.plist:window.location.href=e.apk}},f=(n(39),n(28)),g=n(3);var p=Object(l.g)(function(e){var t=e.data;return r.a.createElement("div",{className:"row",onClick:function(){e.history.push("/app?id=".concat(t.id,"&i=").concat(t.identifier))}},r.a.createElement("img",{src:t.webIcon,alt:""}),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"name"},t.name,t.current?r.a.createElement("span",{className:"tag"},m.langString("Current")):""),r.a.createElement("div",{className:"version"},r.a.createElement("span",null,t.version,"(Build ",t.build,")"),r.a.createElement("span",null,t.channel&&m.langString("Channel")+": "+t.channel||"")),r.a.createElement("div",{className:"date"},m.langString("Upload Date: "),t.date)),r.a.createElement("div",{onClick:function(e){e.stopPropagation(),m.onClickInstall(t)},className:"right"},m.langString("Download")))}),h=n(14);function v(e){return{type:"PLATFORM",text:e}}var E="";console.log(d()),E=d()?sessionStorage.getItem("platform")?sessionStorage.getItem("platform"):"Android":/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"IOS":"Android";var b=Object(h.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{platform:E},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLATFORM":return sessionStorage.setItem("platform",t.text),{platform:t.text};default:return e}});function w(e){return window.localStorage.getItem("ACCESS_KEY")?e+"?key="+window.localStorage.getItem("ACCESS_KEY")+"&v=".concat(parseInt((new Date).getTime()/1e3)):e}function S(e,t){0===e?t(m.langString("Add")):1===e?(t(m.langString("Upload Done!")),setTimeout(function(){t(m.langString("Add"))},2e3)):t("".concat((100*e).toFixed(2),"%"))}var O=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(g.c)(function(e){return e}),l=Object(g.b)(),d=Object(a.useState)(!1),u=Object(s.a)(d,2),h=u[0],E=u[1],b=Object(a.useState)(m.langString("Upload")),O=Object(s.a)(b,2),k=O[0],C=O[1],j=Object(a.useRef)();Object(a.useEffect)(function(){I()},[i.platform]);var I=function(){m.fetch(w("/api/list?p=".concat(i.platform))).then(function(e){c(e)})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{style:{display:m.isPC?"flex":"none"}},r.a.createElement("input",{className:"file",type:"file",name:"file",value:"",ref:j,accept:".ipa, .apk",onChange:function(e){if(0!==e.target.files.length){var t=new FormData;t.append("file",e.target.files[0]),E(!0),m.fetch(w("/api/upload"),{method:"POST",body:t},function(e){S(e.loaded/e.total,C)}).then(function(t){e.target.value="",E(!1),t.err?Object(f.alert)(t.err):I()}).catch(function(e){E(!1),S(0,C)})}}}),r.a.createElement("div",{className:"add-btn"},r.a.createElement(function(e){return r.a.createElement("div",{className:"tabs"},["Android","IOS"].map(function(e){return r.a.createElement("div",{className:e===i.platform?"tab on":"tab",onClick:function(){l(v(e))}},m.langString(e))}))},null),r.a.createElement("div",{className:"button",onClick:function(){h||j.current.click()}},k))),r.a.createElement("div",{id:"list"},o.map(function(e){return r.a.createElement(p,{data:e,key:e.id})})))},k=n(32),C=n.n(k);function j(){var e={};return window.location.search.split("?")[1].split("&").forEach(function(t){var n=t.split("=");2===n.length&&(e[n[0]]=n[1])}),e}var I=[{path:"/app",name:"App",component:Object(l.g)(function(e){var t=Object(a.useState)({}),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)([]),l=Object(s.a)(i,2),d=l[0],u=l[1],f=Object(a.useRef)(),h=j().id||"",E=j().i,b=Object(g.c)(function(e){return e}),w=Object(g.b)();Object(a.useEffect)(function(){m.isPC||(/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?w(v("IOS")):w(v("Android"))),S()},[h,b.platform]);var S=function(){m.fetch("/api/info?id=".concat(h,"&i=").concat(E,"&v=").concat(parseInt((new Date).getTime()/1e3),"&p=").concat(b.platform)).then(function(e){var t;c(e),u(e.history),t=f.current,C.a.toCanvas(t,window.location.href,{width:256,height:256,colorDark:"#000000",colorLight:"#ffffff",errorCorrectionLevel:"H"})})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"plat-tab",style:{display:m.isPC?"block":"none"}},r.a.createElement(function(e){return r.a.createElement("div",{className:"tabs"},["Android","IOS"].map(function(e){return r.a.createElement("div",{className:e===b.platform?"tab on":"tab",onClick:function(){w(v(e))},key:e},m.langString(e))}))},null)),r.a.createElement("div",{id:"info"},r.a.createElement("img",{className:"icon",src:o.webIcon,alt:""}),r.a.createElement("div",{className:"name"},o.name),r.a.createElement("div",null,o.channel&&m.langString("Channel")+": "+o.channel||""),r.a.createElement("div",null,m.langString("Beta")," - ",o.version,"(Build ",o.build,") -",m.sizeStr(o.size)),r.a.createElement("div",{className:"date"},m.langString("Upload Date: "),o.date),r.a.createElement("div",{className:"qrcode"},r.a.createElement("canvas",{ref:f})),r.a.createElement("div",{onClick:function(){return m.onClickInstall(o)},className:"install"},m.langString("Download and Install"))),r.a.createElement("div",{id:"list"},d.map(function(e){return r.a.createElement(p,{data:e,key:e.id})})))}),auth:!1},{path:"/",name:"Home",component:O,auth:!1}],N=function(){var e=!!Object(g.c)(function(e){return e}).ticket;return r.a.createElement(i.a,null,r.a.createElement(l.d,null,I.map(function(t,n){return r.a.createElement(l.b,{key:n,path:t.path,exact:!0,render:function(n){return t.auth?e?r.a.createElement(t.component,n):r.a.createElement(l.a,{to:{pathname:"/login"}}):r.a.createElement(t.component,n)}})}),r.a.createElement(l.a,{to:{pathname:"/login"}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));document.addEventListener("WeixinJSBridgeReady",function(){window.WeixinJSBridge.call("hideOptionMenu")}),c.a.render(r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{store:b},r.a.createElement(N,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.bb2f1133.chunk.js.map